/* Retro Pixel Art Theme Variables & Font */
@font-face {
  font-family: 'Press Start 2P';
  src: url('../fonts/PressStart2P-Regular.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  font-display: swap; /* Use swap for better perceived performance */
}

:root {
  --font-family-pixel: 'Press Start 2P', cursive; /* Fallback to cursive */
  --font-family-base: sans-serif; /* Keep a readable fallback */

  /* Basic Retro Color Palette (Example) */
  --color-background: #030520;
  --color-page-background: #01010e;
  --color-text: #ffffff;
  --color-primary: #00ffff;
  --color-accent: #fffb00;
  --color-border: #ffffff;

  /* Expanded Retro Colors */
  --color-magenta: #ff00ff;
  --color-green: #00ff00;
  --color-red: #ff0000;
  --color-orange: #ff9900;

  --border-pixel: 2px solid var(--color-border);

}

body {
  font-family: var(--font-family-pixel); /* Use pixel font for body text */
  background-color: var(--color-page-background); /* Different color outside the box */
  color: var(--color-text);
  margin: 0;
  padding: 0;
  line-height: 1.6; /* Improve readability */
}

/* --- Screen Wrapper for Box Effect --- */
#screen-wrapper {
  position: absolute;
  top: 45%;
  left: 45%;
  transform: translate(-50%, -50%);
  width: 45%;
  height: 70%; 
  background-color: var(--color-background);
  overflow: hidden;
}



/* --- Full Screen Section Visibility (New Approach) --- */
/* Sections are now controlled by position:absolute and visibility/opacity */

/* --- Header & Navigation Styling --- */

header {
  position: absolute; /* Position relative to screen-wrapper */
  top: 20px;
  left: 0;
  width: 100%; /* Full width of wrapper */
  padding: 10px 20px;
  text-align: center;
  z-index: 1000;
  box-sizing: border-box; /* Include padding in width */
}

header h1 {
  margin: 0;
  font-size: 1.8em;
}

header h1 a {
  font-family: var(--font-family-pixel);
  color: var(--color-primary);
  text-decoration: none;
  text-transform: uppercase; /* Common in retro games */
}

header h1 a:hover {
  color: var(--color-accent);
}


/* --- Full Screen Section Styling --- */
main > section {
  position: absolute; /* Position relative to screen-wrapper */
  top: 0;
  left: 0;
  width: 100%; /* Full width of wrapper */
  height: 100%; /* Full height of wrapper */
  padding: 60px 40px 40px 40px; /* Add padding inside section (more top for back button) */
  box-sizing: border-box; /* Include padding in width/height */
  overflow-y: auto; /* Allow scrolling within section */
  z-index: 500; /* Default z-index for inactive sections */

  /* Initial state & transition */
  visibility: hidden;
}

main > section.active-section {
  visibility: visible;
  z-index: 700; 
}

main h2 {
  font-family: var(--font-family-pixel);
  color: var(--color-primary);
  text-transform: uppercase;
  border-bottom: var(--border-pixel);
  padding-bottom: 5px;
  margin-bottom: 15px;
  font-size: 1.4em;
}

main p {
  font-family: var(--font-family-pixel); /* Use pixel font for paragraphs */
  color: var(--color-text);
  line-height: 1.6;
  margin-bottom: 15px;
}

/* Basic styling for links within content */
main a {
    color: var(--color-primary);
}
main a:hover {
    color: var(--color-accent);
}

/* Call-to-Action Button Styling */

.hidden {
  visibility: hidden !important; /* Ensure it overrides */
  opacity: 0 !important;
  pointer-events: none !important; /* Prevent interaction when hidden */
}

/* --- Intro Screen Styles --- */
#intro-screen {
    position: absolute; /* Position relative to screen-wrapper */
    top: 0;
    left: 0;
    width: 100%; /* Full width of wrapper */
    height: 100%; /* Full height of wrapper */
    z-index: 1000; /* Ensure it's on top */
    display: flex;
    flex-direction: column; /* Stack visual and text if needed */
    align-items: center;
    justify-content: center;
    text-align: center;
    cursor: pointer; /* Indicate it's clickable */
}

#intro-screen p {
    font-family: var(--font-family-pixel);
    color: var(--color-primary); /* Or var(--color-text) */
    font-size: 1.2em; /* Adjust as needed */
    padding: 20px;
}

/* --- New Intro Prompt Styling --- */
#intro-prompt {
    /* Specific styles */
    padding: 15px 30px; /* Keep specific padding */
    font-size: 1.1em;   /* Keep specific font size */
    opacity: 0;         /* Keep initial state */
    visibility: hidden; /* Keep initial state */
}

#intro-prompt:hover {
    color: var(--color-accent); /* Keep text color change on hover */
}

#intro-prompt p {
    margin: 0; /* Remove default paragraph margin */
    padding: 0;
    font-size: inherit; /* Inherit font size from parent */
    color: inherit; /* Inherit color from parent */
    font-family: inherit; /* Inherit font family */
}



/* --- Footer Styling --- */

footer {
  position: absolute; /* Position relative to screen-wrapper */
  bottom: 0;
  left: 0;
  width: 100%; /* Full width of wrapper */
  text-align: center;
  padding: 10px 20px;
  font-size: 0.8em;
  color: var(--color-text);
  z-index: 10; /* Low z-index */
  /* Initially hidden, shown by JS potentially */
  visibility: hidden;
  opacity: 0;
}

footer.visible {
    visibility: visible;
    opacity: 1;
}

footer p {
  margin: 0;
}
/* === Retro Enhancements === */

.scanlines {
  position: absolute; /* Position relative to screen-wrapper */
  top: 0;
  left: 0;
  width: 100%; /* Full width of wrapper */
  height: 100%; /* Full height of wrapper */
  pointer-events: none; /* Allow clicks through */
  z-index: 800; /* Adjusted Z-Index: Effects above sections/menu */
  overflow: hidden; /* Hide the overflowing pseudo-element */
}

.scanlines::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 200%; /* Double height for seamless looping */
  background-image: repeating-linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.05),
    rgba(255, 255, 255, 0.053) 3px,
    transparent 6px,
    transparent 9px
  );
  /* Animate using transform for better performance */
  /* Use downward tilty animation */
  animation: scanlineDownTilty 15s linear infinite; /* Use linear for consistent speed */
}

@keyframes scanlineDownTilty {
  0% { transform: translateY(-50%); }
  100% { transform: translateY(0); }
}

.pixel-border {
  border: 4px solid var(--color-border);
  image-rendering: pixelated;
}

.glow {
  /* Original glow + subtle chromatic aberration */
  text-shadow:
    0 0 5px var(--color-primary),
    0 0 10px var(--color-primary),
    1px 1px 1px var(--color-red),   /* Red offset */
    -1px -1px 1px var(--color-green); /* Green offset */
  animation: glowPulse 2s infinite ease-in-out; /* Keep pulsing */
}

.cta-button:hover {
  transform: scale(1.1);
  transition: transform 0.2s ease, background-color 0.2s ease, color 0.2s ease;
  box-shadow: 0 0 5px var(--color-primary);
}


#intro-screen.fade-out {
  opacity: 0;
}


/* === Animated Glow Effect (More Intense) === */
@keyframes glowPulse {
  0%, 100% {
    /* Base state with chromatic aberration */
    text-shadow:
      0 0 5px var(--color-primary),
      0 0 10px var(--color-primary),
      1px 1px 1px var(--color-red),
      -1px -1px 1px var(--color-green);
  }
  50% {
    /* Pulsed state with larger glow and aberration */
    text-shadow:
      0 0 15px var(--color-primary), /* Larger glow */
      0 0 25px var(--color-primary), /* Larger glow */
      2px 2px 2px var(--color-red),   /* More offset */
      -2px -2px 2px var(--color-green); /* More offset */
  }
}


/* === CRT Flicker Overlay (Refined) === */
.crt-flicker {
  position: absolute; /* Position relative to screen-wrapper */
  top: 0;
  left: 0;
  width: 100%; /* Full width of wrapper */
  height: 100%; /* Full height of wrapper */
  pointer-events: none; /* Allow clicks through */
  z-index: 800; /* Adjusted Z-Index: Effects above sections/menu */
  background-color: var(--color-background);
  opacity: 0.1; /* More visible base for testing */
  animation: flicker 0.5s infinite; /* Slower for testing */
}

/* Flicker animation (More Intense) */
@keyframes flicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
    opacity: 0.1; /* Higher base opacity */
  }
  20%, 22%, 24%, 55% {
    opacity: 0.3; /* Much higher peaks */
  }
}

/* === Noise Overlay === */
.noise-overlay {
  position: absolute; /* Position relative to screen-wrapper */
  top: 0;
  left: 0;
  width: 100%; /* Full width of wrapper */
  height: 100%; /* Full height of wrapper */
  pointer-events: none; /* Allow clicks through */
  z-index: 100; /* Adjusted Z-Index: Effects above sections/menu */
  opacity: 0.15; /* Very subtle noise */
  background-image: repeating-linear-gradient(transparent, rgb(41, 41, 41) 4px),
                    repeating-linear-gradient(90deg, var(--color-background), rgb(36, 36, 36) 6px);
  background-size: 20px 20px; /* Small pixel noise */
}

/* === Base Retro Button Style === */
.retro-button {
    display: inline-block; /* Good default for buttons/links */
    padding: 15px 25px; /* Base padding */
    font-family: var(--font-family-pixel);
    color: var(--color-text);
    background-color: transparent;
    border: none; /* Default to no border */
    text-decoration: none; /* For 'a' tags used as buttons */
    text-transform: uppercase;
    cursor: pointer;
    text-align: center;
    transition: color 0.2s; /* Base hover transition */
}

.retro-button:hover {
    color: var(--color-accent); /* Default hover effect */
}

/* === Full Screen Menu & Back Button Styles === */

#main-menu {
    position: absolute; /* Position relative to screen-wrapper */
    top: 0;
    left: 0;
    width: 100%; /* Full width of wrapper */
    height: 100%; /* Full height of wrapper */
    z-index: 600; /* Below active section (700), above inactive (500) */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
    /* Initial state & transition */
    visibility: visible; /* Start visible after intro */
    opacity: 1;
}

#main-menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: center;
}

#main-menu li {
    margin-bottom: 20px; /* Space between menu items */
}

/* === Vignette Overlay === */
.vignette-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 200;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0) 50% ,rgba(0,0,0,0.3) 75%, rgba(0,0,0,0.5) 100%);
}

#main-menu a.retro-button {
    padding: 15px 30px; /* Override base padding */
    font-size: 1.2em;   /* Specific font size */
}

.back-button.retro-button {
    /* Specific styles */
    position: absolute;
    top: auto;
    bottom: 20px;
    right: 20px;
    z-index: 900;
    padding: 8px 15px; /* Override base padding */
    font-size: 1.3em;   /* Specific font size */
}

/* === Enhanced CRT Effects === */
.scanline-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 5%;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.045) 0px,
    rgba(255,255,255,0.045) 1px,
    transparent 1px,
    transparent 1px
  );
  animation: scanline-move 10s linear infinite;
  z-index: 800;
}

@keyframes scanline-move {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(20000%); }
}

h1, h2, h3, p, .crt-flicker-text, button {
  /* Removed !important to allow other button animations like button-active */
  animation: textShadow 3s infinite;
}


@keyframes textShadow {
	0% {
		text-shadow: 0.4389924193300864px 0 1px rgba(0, 30, 255, 0.5),
			-0.4389924193300864px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	5% {
		text-shadow: 2.7928974010788217px 0 1px rgba(0, 30, 255, 0.5),
			-2.7928974010788217px 0 2px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	10% {
		text-shadow: 0.02956275843481219px 0 1px rgba(0, 30, 255, 0.5),
			-0.02956275843481219px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	15% {
		text-shadow: 0.40218538552878136px 0 1px rgba(0, 30, 255, 0.5),
			-0.40218538552878136px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	20% {
		text-shadow: 3.4794037899852017px 0 1px rgba(0, 30, 255, 0.5),
			-3.4794037899852017px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	25% {
		text-shadow: 1.6125630401149584px 0 1px rgba(0, 30, 255, 0.5),
			-1.6125630401149584px 0 2px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	30% {
		text-shadow: 0.7015590085143956px 0 1px rgba(0, 30, 255, 0.5),
			-0.7015590085143956px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	35% {
		text-shadow: 3.896914047650351px 0 1px rgba(0, 30, 255, 0.5),
			-3.896914047650351px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	40% {
		text-shadow: 3.870905614848819px 0 1px rgba(0, 30, 255, 0.5),
			-3.870905614848819px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	45% {
		text-shadow: 2.231056963361899px 0 1px rgba(0, 30, 255, 0.5),
			-2.231056963361899px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	50% {
		text-shadow: 0.08084290417898504px 0 1px rgba(0, 30, 255, 0.5),
			-0.08084290417898504px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	55% {
		text-shadow: 2.3758461067427543px 0 1px rgba(0, 30, 255, 0.5),
			-2.3758461067427543px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	60% {
		text-shadow: 2.202193051050636px 0 1px rgba(0, 30, 255, 0.5),
			-2.202193051050636px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	65% {
		text-shadow: 2.8638780614874975px 0 1px rgba(0, 30, 255, 0.5),
			-2.8638780614874975px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	70% {
		text-shadow: 0.48874025155497314px 0 1px rgba(0, 30, 255, 0.5),
			-0.48874025155497314px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	75% {
		text-shadow: 1.8948491305757957px 0 1px rgba(0, 30, 255, 0.5),
			-1.8948491305757957px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	80% {
		text-shadow: 0.0833037308038857px 0 1px rgba(0, 30, 255, 0.5),
			-0.0833037308038857px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	85% {
		text-shadow: 0.09769827255241735px 0 1px rgba(0, 30, 255, 0.5),
			-0.09769827255241735px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	90% {
		text-shadow: 3.443339761481782px 0 1px rgba(0, 30, 255, 0.5),
			-3.443339761481782px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	95% {
		text-shadow: 2.1841838852799786px 0 1px rgba(0, 30, 255, 0.5),
			-2.1841838852799786px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
	100% {
		text-shadow: 2.6208764473832513px 0 1px rgba(0, 30, 255, 0.5),
			-2.6208764473832513px 0 1px rgba(255, 0, 80, 0.3),
			0 0 3px;
	}
}

.crt-frame {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);  /* Centers the image */
  width: 100%;
  height: 120%; 
  z-index: 8000;
  opacity: 1;
  pointer-events: none;

}

/* === Screen Content Container === */
#screen-content {
  width: 100%;
  height: 100%;
  position: relative; /* For potential absolute children if needed */
  transform-origin: center; /* Apply transform origin here */
  background-color: var(--color-background);
}

/* === Power Off Effect === */
@keyframes powerOff {
  0% {
    transform: scale(1, 1);
    filter: brightness(1);
    opacity: 1;
  }
  60% {
    /* Collapse vertically, stretch horizontally slightly, increase brightness */
    transform: scale(1.1, 0.005); /* Adjusted horizontal scale */
    filter: brightness(10);
    opacity: 1; /* Keep opaque until the end */
  }
  100% {
    /* Collapse completely, very bright */
    transform: scale(0, 0);
    filter: brightness(50);
    opacity: 0; /* Fade out at the very end */
  }
}

#screen-wrapper.powering-off #screen-content { /* Target inner div */
  animation: powerOff 0.75s cubic-bezier(0.230, 1.000, 0.320, 1.000) forwards; /* Apply animation with ease-out quint */
}

/* === Overlay Fade-Out Effect === */
@keyframes fadeOutOverlays {
  from { opacity: 1; } /* Start fully visible */
  to   { opacity: 0; } /* End fully transparent */
}

@keyframes fadeOutBrightness {
  from { filter: brightness(1); }
  to   { filter: brightness(0.45); }
}

/* Apply fade-out to overlays *after* content collapse */
#screen-wrapper.powering-off .vignette-overlay,
#screen-wrapper.powering-off {
  animation: fadeOutOverlays 0.15s linear forwards;
  animation-delay: 0.45s; /* Start after powerOff animation finishes */
  /* Ensure overlays stay on top during fade */
  z-index: 850; /* Example: Higher than content, adjust if needed */
}

.crt-frame.powering-off {
  animation: fadeOutBrightness 0.25s linear forwards;
  animation-delay: 0.55s;
}

/* === Button Active State (Color Cycling) === */
@keyframes textColorCycle {
  0%, 100% { color: var(--color-text); } /* Flash to white */
  50%      { color: var(--color-accent); } /* Flash to yellow */
}

.button-active {
  /* Apply the animation when the class is added */
  animation: textColorCycle 0.3s linear infinite !important;
  transform: scale(1.1);
}

/* --- Project Section Styles --- */

#projects-section {
    /* Ensure it fills the space if needed, but main section styles handle this */
    position: relative; /* Needed for absolute positioning of children like video view */
}

#project-select-view {
    display: flex; /* Use flexbox for layout */
    flex-wrap: wrap; /* Allow items to wrap */
    gap: 20px; /* Space between project buttons */
    justify-content: center; /* Center items */
    padding: 20px 0; /* Add some padding */
}

.project-select-button.retro-button {
    font-size: 1em;              /* Specific font size */
    min-width: 150px;            /* Specific min-width */
    transition: color 0.2s, border-color 0.2s; /* Add border transition */
}

/* Extend base hover */
.project-select-button.retro-button:hover {
    color: var(--color-accent); /* Add border color change */
}

#project-detail-view {
    /* Hidden by default using .hidden class */
    padding: 20px; /* Add padding */
}

#project-detail-view h3 {
    font-family: var(--font-family-pixel);
    color: var(--color-accent); /* Use accent for detail title */
    margin-bottom: 15px;
    font-size: 1.2em;
    text-transform: uppercase;
}

#project-detail-view p {
    margin-bottom: 25px;
}

.project-detail-buttons {
    text-align: center; /* Center the play button */
    margin-top: 20px;
}

#project-video-view {
    position: absolute; /* Cover the project section area */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 1); /* Dark overlay */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000; /* Above section content and header */
    padding: 40px; /* Generous padding around the video */
    box-sizing: border-box;
}

#project-close-video-button.retro-button {
    position: absolute;
    top: 80px; /* Keep specific positioning */
    right: 40px;
    z-index: 1110; /* CORRECTED z-index */
    font-size: 1.5em; /* Keep specific font size */
    padding: 5px 10px; /* Keep specific padding */
    line-height: 1; /* Keep specific line height */
}

#youtube-player {
    width: 100%; /* Take full width within padding */
    height: auto; /* Height determined by aspect ratio */
    max-width: 960px; /* Max width for large screens */
    aspect-ratio: 1.2 / 1;
    background-color: #000; /* Black background while loading */
}

#youtube-player iframe {
    display: block; /* Remove extra space below iframe */
    width: 100%;
    height: 100%;
    border: none; /* Remove iframe border */
}

/* Ensure .hidden works as expected */
/* Overwrite previous definition if necessary */
.hidden {
  display: none !important; /* Use display none for layout changes */
}
